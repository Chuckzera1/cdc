(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{118:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),l=a.n(o),i=(a(69),a(9)),c=a(10),s=a(15),u=a(13),m=a(14),d=a(7),h=a(21),p=a.n(h),b=(a(70),a(11)),E=a.n(b),f=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={msgErro:""},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:this.props.id},this.props.label),r.a.createElement("input",this.props),r.a.createElement("span",{className:"erro"},this.state.msgErro))}},{key:"componentDidMount",value:function(){E.a.subscribe("erro-validacao",function(e,t){t.field===this.props.inputName&&this.setState({msgErro:t.defaultMessage})}.bind(this)),E.a.subscribe("limpa-erros",function(e){this.setState({msgErro:""})}.bind(this))}}]),t}(n.Component),v=function(){function e(){Object(i.a)(this,e)}return Object(c.a)(e,[{key:"publicaErros",value:function(e){e.errors.map(function(e){return E.a.publish("erro-validacao",e),console.log(e)})}}]),e}(),j=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={nome:"",email:"",senha:""},e.enviaForm=e.enviaForm.bind(Object(d.a)(Object(d.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"enviaForm",value:function(e){e.preventDefault(),p.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores",contentType:"application/json",dataType:"json",type:"post",data:JSON.stringify({nome:this.state.nome,email:this.state.email,senha:this.state.senha}),success:function(e){console.log("enviado com sucesso"),E.a.publish("atualiza-lista-autores",e),this.initialState()}.bind(this),error:function(e){400===e.status&&(new v).publicaErros(e.responseJSON)},beforeSend:function(){E.a.publish("limpa-erros",{})}})}},{key:"initialState",value:function(){this.setState({nome:"",email:"",senha:""})}},{key:"salvaAlteracao",value:function(e,t){var a=[];a[e]=t.target.value,this.setState(a)}},{key:"render",value:function(){return r.a.createElement("div",{className:"pure-form pure-form-aligned"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.enviaForm,method:"post"},r.a.createElement(f,{label:"Nome",id:"nome",type:"text",name:"nome",placeholder:"Nome",value:this.state.nome||"",onChange:this.salvaAlteracao.bind(this,"nome"),required:!0}),r.a.createElement(f,{label:"Email",id:"email",type:"email",name:"email",placeholder:"Email",value:this.state.email||"",onChange:this.salvaAlteracao.bind(this,"email"),required:!0}),r.a.createElement(f,{label:"Senha",id:"senha",type:"password",name:"senha",placeholder:"Senha",value:this.state.senha||"",onChange:this.salvaAlteracao.bind(this,"senha"),required:!0}),r.a.createElement("button",{type:"submit",className:"pure-button pure-button-primary"},"Gravar")))}}]),t}(n.Component),O=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={msgErro:""},e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Nome"),r.a.createElement("th",null,"email"),r.a.createElement("th",null,"A\xe7\xf5es"))),r.a.createElement("tbody",null,this.props.lista.map(function(e,t){return e.id=t,r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.nome),r.a.createElement("td",null,e.email),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger ml-2",type:"button"},"Excluir")))})))}}]),t}(n.Component),y=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={lista:[]},e.loadData=e.loadData.bind(Object(d.a)(Object(d.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),console.log(this.state),E.a.subscribe("atualiza-lista-autores",function(e,t){this.loadData()}.bind(this))}},{key:"loadData",value:function(){p.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores",dataType:"json",success:function(e){this.setState({lista:e})}.bind(this),error:function(e){alert("Erro de conex\xe3o")}})}},{key:"deleteData",value:function(e){var t=e.id;p.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores/".concat(e.id),contentType:"application/json",dataType:"json",type:"DELETE",data:JSON.stringify({id:"".concat(t)}),success:function(e){console.log("enviado com sucesso"),E.a.publish("atualiza-lista-autores",e),this.initialState()}.bind(this)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de autores")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(j,{loadData:this.loadData}),r.a.createElement(O,{lista:this.state.lista,deleteData:this.deleteData})))}}]),t}(n.Component),g=(a(72),a(29)),k=a.n(g),N=a(33),S=a.n(N),D=a(30),T=a.n(D),I=(a(73),a(74),function(e){return r.a.createElement(k.a,{collapseOnSelect:!0,expand:"lg",bg:"dark",variant:"dark"},r.a.createElement(k.a.Brand,{href:"/"},"Biblioteca"),r.a.createElement(k.a.Toggle,{"aria-controls":"responsive-navbar-nav"}),r.a.createElement(k.a.Collapse,{id:"responsive-navbar-nav"},r.a.createElement(S.a,{className:"mr-auto"},r.a.createElement(T.a,{title:"Menu",id:"collasible-nav-dropdown"},r.a.createElement(T.a.Item,{href:"/"}," Home"),r.a.createElement(T.a.Item,{href:"/autor"}," Autores "),r.a.createElement(T.a.Item,{href:"/"}," Livros "))),r.a.createElement(S.a,null,r.a.createElement(S.a.Link,{href:"#deets"},"Home"))))}),C=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"App"},r.a.createElement(I,null),r.a.createElement("div",{id:"main"},this.props.children)))}}]),t}(n.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Bem vindo ao sistema")),r.a.createElement("div",{className:"content",id:"content"}))}}]),t}(n.Component),A=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={titulo:"",preco:"",autorId:""},e.enviaForm=e.enviaForm.bind(Object(d.a)(Object(d.a)(e))),e.setTitulo=e.setTitulo.bind(Object(d.a)(Object(d.a)(e))),e.setPreco=e.setPreco.bind(Object(d.a)(Object(d.a)(e))),e.setAutorId=e.setAutorId.bind(Object(d.a)(Object(d.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"enviaForm",value:function(e){e.preventDefault(),p.a.ajax({url:"http://cdc-react.herokuapp.com/api/livros",contentType:"application/json",dataType:"json",type:"post",data:JSON.stringify({titulo:this.state.titulo,preco:this.state.preco,autorId:this.state.autorId}),success:function(e){console.log("enviado com sucesso"),E.a.publish("atualiza-lista-livros",e),this.initialState()}.bind(this),error:function(e){400===e.status&&(new v).publicaErros(e.responseJSON)},beforeSend:function(){E.a.publish("limpa-erros",{})}})}},{key:"initialState",value:function(){this.setState({titulo:"",preco:"",autorId:""})}},{key:"setSearch",value:function(e){this.setState({lista:this.state.lista.filter(function(t){return t.titulo.toString().includes(e)})})}},{key:"setTitulo",value:function(e){this.setState({titulo:e.target.value})}},{key:"setPreco",value:function(e){this.setState({preco:e.target.value})}},{key:"setAutorId",value:function(e){this.setState({autorId:e.target.value})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"pure-form pure-form-aligned"},r.a.createElement("form",{className:"pure-form pure-form-aligned",onSubmit:this.enviaForm,method:"post"},r.a.createElement(f,{label:"Titulo",id:"titulo",type:"text",name:"titulo",placeholder:"titulo",value:this.state.titulo||"",onChange:function(t){return e.setTitulo(t)},required:!0}),r.a.createElement(f,{label:"preco",id:"preco",type:"number",name:"preco",placeholder:"preco",value:this.state.preco||"",onChange:function(t){return e.setPreco(t)},step:".01",required:!0}),r.a.createElement("div",{className:"pure-control-group"},r.a.createElement("label",{htmlFor:"autorId"},"Autor"),r.a.createElement("select",{name:"autorId",id:"autorId",onChange:this.setAutorId},r.a.createElement("option",{value:""},"Selecione autor"),this.props.autores.map(function(e){return r.a.createElement("option",{value:e.id,key:e.id},e.nome)}))),r.a.createElement("button",{type:"submit",className:"pure-button pure-button-primary"},"Gravar")))}}]),t}(n.Component),w=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={msgErro:""},e.returnAutorNome=e.returnAutorNome.bind(Object(d.a)(Object(d.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"returnAutorNome",value:function(e,t){if(e.autorId===t.id)return t.nome}},{key:"render",value:function(){return r.a.createElement("table",{className:"pure-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Id"),r.a.createElement("th",null,"Titulo"),r.a.createElement("th",null,"Preco"),r.a.createElement("th",null,"Autor"),r.a.createElement("th",null,"A\xe7\xf5es"))),r.a.createElement("tbody",null,this.props.lista.map(function(e,t,a){return e.id=t,r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.titulo),r.a.createElement("td",null,e.preco),r.a.createElement("td",null,e.autor.nome),r.a.createElement("td",null,r.a.createElement("button",{className:"btn btn-danger ml-2",type:"button"},"Excluir")))})))}}]),t}(n.Component),F=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(s.a)(this,Object(u.a)(t).call(this))).state={lista:[],autores:[]},e.loadData=e.loadData.bind(Object(d.a)(Object(d.a)(e))),e}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){this.loadData(),p.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores",dataType:"json",success:function(e){this.setState({autores:e})}.bind(this),error:function(e){alert("Erro de conex\xe3o")}}),console.log(this.state),E.a.subscribe("atualiza-lista-livros",function(e,t){this.loadData()}.bind(this))}},{key:"loadData",value:function(){p.a.ajax({url:"http://cdc-react.herokuapp.com/api/livros",dataType:"json",success:function(e){this.setState({lista:e})}.bind(this),error:function(e){alert("Erro de conex\xe3o")}})}},{key:"deleteData",value:function(e){var t=e.id;p.a.ajax({url:"http://cdc-react.herokuapp.com/api/autores/".concat(e.id),contentType:"application/json",dataType:"json",type:"DELETE",data:JSON.stringify({id:"".concat(t)}),success:function(e){console.log("enviado com sucesso"),E.a.publish("atualiza-lista-autores",e),this.initialState()}.bind(this)})}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,"Cadastro de autores")),r.a.createElement("div",{className:"content",id:"content"},r.a.createElement(A,{loadData:this.loadData,autores:this.state.autores}),r.a.createElement(w,{loadData:this.loadData,lista:this.state.lista,autores:this.state.autores})))}}]),t}(n.Component),J=a(61),z=a(23);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(J.a,null,r.a.createElement(C,null,r.a.createElement(z.a,{exact:!0,path:"/",component:x}),r.a.createElement(z.a,{path:"/autor",component:y}),r.a.createElement(z.a,{path:"/book",component:F}))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},64:function(e,t,a){e.exports=a(118)},69:function(e,t,a){},70:function(e,t,a){},72:function(e,t,a){},74:function(e,t,a){}},[[64,1,2]]]);
//# sourceMappingURL=main.5ca7a450.chunk.js.map